# DialogueEngine ì™„ì „í•œ ìŠ¤í‚¤ë§ˆ ë ˆí¼ëŸ°ìŠ¤

ëª¨ë“  ì¡°ê±´/íš¨ê³¼ë¥¼ í¬í•¨í•œ ì™„ì „í•œ í˜•ì‹ ë¬¸ì„œì…ë‹ˆë‹¤.

---

## ğŸ“‹ ê¸°ë³¸ êµ¬ì¡°

```json
{
  "ì”¬_ì´ë¦„": {
    "ops": [ /* ì˜¤í¼ë ˆì´ì…˜ ë°°ì—´ */ ]
  }
}
```

---

## ğŸ® ì˜¤í¼ë ˆì´ì…˜ ì¢…ë¥˜

### 1. `say` - í…ìŠ¤íŠ¸ í‘œì‹œ

```json
{"say": "í…ìŠ¤íŠ¸"}
{"say": "í…ìŠ¤íŠ¸", "speaker": "í™”ìì´ë¦„"}
```

---

### 2. `choice` - ì„ íƒì§€

```json
{
  "choice": [
    {
      "id": "í•„ìˆ˜_ê³ ìœ _id",
      "text": "í•„ìˆ˜_ì„ íƒì§€_í…ìŠ¤íŠ¸",
      
      "// ----- ë‹¤ìŒ ì”¬ (íƒ1) -----": "",
      "next": {"scene": "ì”¬_id"},
      "next": {"scene": "ì”¬", "node": "ë…¸ë“œ"},
      "next": {"jump": {"file": "ê²½ë¡œ", "scene": "ì”¬"}},
      "next": {"end": true},
      "next_scene": "ì”¬_id",  // ê°„ë‹¨í•œ í˜•ì‹ (next ëŒ€ì‹  ì‚¬ìš© ê°€ëŠ¥)
      
      "// ----- ì¡°ê±´ -----": "",
      "conditions": { /* ì•„ë˜ ì¡°ê±´ ì„¹ì…˜ ì°¸ê³  */ },
      
      "// ----- íš¨ê³¼ -----": "",
      "effects": [ /* ì•„ë˜ íš¨ê³¼ ì„¹ì…˜ ì°¸ê³  */ ],
      
      "// ----- ê¸°íƒ€ -----": "",
      "enabled": true,
      "disabledReason": "ë¹„í™œì„±í™”_ì´ìœ ",  // ë˜ëŠ” "disabled_reason"
      "isBranchPoint": false,  // ë˜ëŠ” "branch"
      "metadata": {}
    }
  ]
}
```

**ì°¸ê³ **: `next_scene`ì€ `next.scene`ì˜ ê°„ë‹¨í•œ í˜•ì‹ì…ë‹ˆë‹¤. `disabled_reason`ê³¼ `branch`ëŠ” ê°ê° `disabledReason`ê³¼ `isBranchPoint`ì˜ ëŒ€ì²´ í˜•ì‹ìœ¼ë¡œ ì§€ì›ë©ë‹ˆë‹¤.

---

### 3. `effect` - ê²Œì„ ìƒíƒœ ë³€ê²½

```json
{
  "effect": {
    "// ìŠ¤íƒ¯ ë³€ê²½ (delta)": "",
    "stat": {
      "ìŠ¤íƒ¯ì´ë¦„": "ë³€ê²½ëŸ‰_number"
    },
    
    "// í”Œë˜ê·¸ ì„¤ì •": "",
    "flag": {
      "í”Œë˜ê·¸ì´ë¦„": "boolean"
    },
    
    "// ì•„ì´í…œ": "",
    "item": {
      "add": "ì•„ì´í…œ_id ë˜ëŠ” ë°°ì—´",
      "remove": "ì•„ì´í…œ_id ë˜ëŠ” ë°°ì—´"
    }
  }
}
```

---

### 4. `jump` - íŒŒì¼ ì´ë™

```json
{
  "jump": {
    "file": "ê²½ë¡œ",
    "scene": "ì”¬_id",
    "node": "ë…¸ë“œ_id (ì„ íƒ)"
  }
}
```

---

### 5. `end` - ì¢…ë£Œ

```json
{"end": true}
```

---

## âœ… ì¡°ê±´(Conditions)

### ê¸°ë³¸ í˜•ì‹ (ì„ íƒì§€ ë‚´)

```json
"conditions": {
  "// ìŠ¤íƒ¯ ì¡°ê±´ (ìµœì†Œê°’)": "",
  "stats": {
    "strength": 10,
    "intelligence": 8
  },
  
  "// ì•„ì´í…œ ì†Œìœ ": "",
  "items": ["ì•„ì´í…œ1", "ì•„ì´í…œ2"],
  
  "// í”Œë˜ê·¸ ì¡°ê±´": "",
  "flags": {
    "í”Œë˜ê·¸ì´ë¦„": true
  }
}
```

### ê³ ê¸‰ í˜•ì‹ (ë°°ì—´)

```json
"conditions": [
  {
    "// AND - ëª¨ë‘ ì¶©ì¡±": "",
    "type": "and",
    "data": {
      "conditions": []
    }
  },
  {
    "// OR - í•˜ë‚˜ ì´ìƒ": "",
    "type": "or",
    "data": {
      "conditions": []
    }
  },
  {
    "// NOT - ì¶©ì¡± ì•ˆ í•¨": "",
    "type": "not",
    "data": {
      "condition": {}
    }
  },
  {
    "// ìŠ¤íƒ¯ ë²”ìœ„": "",
    "type": "hasStat",
    "data": {
      "stat": "ìŠ¤íƒ¯ì´ë¦„",
      "min": "ìµœì†Œê°’ (ì„ íƒ)",
      "max": "ìµœëŒ€ê°’ (ì„ íƒ)"
    }
  },
  {
    "// ì•„ì´í…œ ì†Œìœ ": "",
    "type": "hasItem",
    "data": {
      "item": "ì•„ì´í…œ_id"
    }
  },
  {
    "// í”Œë˜ê·¸ í™•ì¸": "",
    "type": "hasFlag",
    "data": {
      "flag": "í”Œë˜ê·¸ì´ë¦„",
      "value": "boolean"
    }
  },
  {
    "// ì»¤ìŠ¤í…€": "",
    "type": "custom",
    "data": {
      "ì»¤ìŠ¤í…€_í‚¤": "ì»¤ìŠ¤í…€_ê°’",
      "result": "ì™¸ë¶€_í‰ê°€_ê²°ê³¼_boolean"
    }
  }
]
```

---

## ğŸ’¥ íš¨ê³¼(Effects)

### ê°„ë‹¨í•œ í˜•ì‹ (effect ì˜¤í¼ë ˆì´ì…˜ ë‚´)

```json
{
  "effect": {
    "stat": {
      "hp": -10,
      "gold": 50
    },
    "flag": {
      "completed": true
    },
    "item": {
      "add": "sword",
      "remove": "broken_sword"
    }
  }
}
```

### ê³ ê¸‰ í˜•ì‹ (ì„ íƒì§€ effects ë°°ì—´)

```json
"effects": [
  {
    "// ìŠ¤íƒ¯ ë³€ê²½ (ì—¬ëŸ¬ í˜•ì‹ ì§€ì›)": "",
    "type": "changeStat",
    "data": {
      "// í˜•ì‹ 1: ì—¬ëŸ¬ ìŠ¤íƒ¯ í•œë²ˆì—": "",
      "stats": {
        "hp": -10,
        "mp": 5
      },
      "// í˜•ì‹ 2: ë‹¨ì¼ ìŠ¤íƒ¯ (delta)": "",
      "stat": "hp",
      "delta": -10,
      "// í˜•ì‹ 3: ë‹¨ì¼ ìŠ¤íƒ¯ (ì ˆëŒ€ê°’)": "",
      "stat": "hp",
      "value": 100
    },
    "description": "ì„¤ëª… (ì„ íƒ)"
  },
  {
    "// ì•„ì´í…œ ì¶”ê°€ (ë‹¨ì¼ ë˜ëŠ” ë³µìˆ˜)": "",
    "type": "addItem",
    "data": {
      "// í˜•ì‹ 1: ë‹¨ì¼ ì•„ì´í…œ": "",
      "item": "sword",
      "// í˜•ì‹ 2: ì—¬ëŸ¬ ì•„ì´í…œ": "",
      "items": ["sword", "shield"]
    },
    "description": "ì„¤ëª…"
  },
  {
    "// ì•„ì´í…œ ì œê±° (ë‹¨ì¼ ë˜ëŠ” ë³µìˆ˜)": "",
    "type": "removeItem",
    "data": {
      "// í˜•ì‹ 1: ë‹¨ì¼ ì•„ì´í…œ": "",
      "item": "old_sword",
      "// í˜•ì‹ 2: ì—¬ëŸ¬ ì•„ì´í…œ": "",
      "items": ["old_sword", "broken_shield"]
    },
    "description": "ì„¤ëª…"
  },
  {
    "// í”Œë˜ê·¸ ì„¤ì • (ë‹¨ì¼ ë˜ëŠ” ë³µìˆ˜)": "",
    "type": "setFlag",
    "data": {
      "// í˜•ì‹ 1: ë‹¨ì¼ í”Œë˜ê·¸": "",
      "flag": "quest_done",
      "value": true,
      "// í˜•ì‹ 2: ì—¬ëŸ¬ í”Œë˜ê·¸": "",
      "flags": {
        "quest_done": true,
        "boss_defeated": false
      }
    },
    "description": "ì„¤ëª…"
  },
  {
    "// ì”¬ ë³€ê²½": "",
    "type": "changeScene",
    "data": {
      "scene": "ì”¬_id"
    },
    "description": "ì„¤ëª…"
  },
  {
    "// ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸": "",
    "type": "customEvent",
    "data": {
      "event_type": "ì´ë²¤íŠ¸_íƒ€ì…",
      "ì»¤ìŠ¤í…€_í•„ë“œ": "ì»¤ìŠ¤í…€_ê°’"
    },
    "description": "ì„¤ëª…"
  }
]
```

---

## ğŸ“Š íƒ€ì… ì •ë¦¬

### EffectType
- `changeStat` - ìŠ¤íƒ¯ ë³€ê²½
- `addItem` - ì•„ì´í…œ ì¶”ê°€
- `removeItem` - ì•„ì´í…œ ì œê±°
- `setFlag` - í”Œë˜ê·¸ ì„¤ì •
- `changeScene` - ì”¬ ë³€ê²½
- `customEvent` - ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸

### ConditionType
- `hasStat` - ìŠ¤íƒ¯ ì¡°ê±´
- `hasItem` - ì•„ì´í…œ ì†Œìœ 
- `hasFlag` - í”Œë˜ê·¸ ì¡°ê±´
- `and` - AND ì¡°í•©
- `or` - OR ì¡°í•©
- `not` - NOT ì¡°ê±´
- `custom` - ì»¤ìŠ¤í…€ ì¡°ê±´

---

## ğŸ”— next ì˜µì…˜

```json
"// ë‹¤ìŒ ì”¬": "",
"next": {"scene": "ì”¬_id"}

"// ë‹¤ìŒ ì”¬ì˜ íŠ¹ì • ë…¸ë“œ": "",
"next": {"scene": "ì”¬_id", "node": "ë…¸ë“œ_id"}

"// ë‹¤ë¥¸ íŒŒì¼ë¡œ ì í”„": "",
"next": {
  "jump": {
    "file": "assets/dialogue/ê²½ë¡œ.json",
    "scene": "ì”¬_id"
  }
}

"// ëŒ€í™” ì¢…ë£Œ": "",
"next": {"end": true}

"// ê°„ë‹¨í•œ í˜•ì‹ (next ëŒ€ì‹ )": "",
"next_scene": "ì”¬_id"
```

---

## ğŸ¯ ì”¬ ë ˆë²¨ ì†ì„±

```json
{
  "ì”¬_ì´ë¦„": {
    "ops": [],
    
    "// ì”¬ ì§„ì… ì‹œ ì‹¤í–‰": "",
    "onEnter": [
      {
        "type": "íš¨ê³¼_íƒ€ì…",
        "data": {}
      }
    ],
    
    "// ì”¬ ì¢…ë£Œ ì‹œ ì‹¤í–‰": "",
    "onExit": [
      {
        "type": "íš¨ê³¼_íƒ€ì…",
        "data": {}
      }
    ],
    
    "// ë©”íƒ€ë°ì´í„°": "",
    "metadata": {
      "ì»¤ìŠ¤í…€_í‚¤": "ì»¤ìŠ¤í…€_ê°’"
    }
  }
}
```

---

## ğŸ“ íŒŒì¼ ë ˆë²¨ ë©”íƒ€ë°ì´í„°

```json
{
  "ì”¬ë“¤": {},
  
  "// íŒŒì¼ ì „ì²´ ë©”íƒ€ë°ì´í„°": "",
  "metadata": {
    "version": "1.0.0",
    "author": "ì‘ì„±ì",
    "description": "ì„¤ëª…",
    "tags": ["íƒœê·¸1", "íƒœê·¸2"]
  }
}
```

---

## âœ… í•„ìˆ˜ vs ì„ íƒ

### í•„ìˆ˜ í•„ë“œ
- `choice.id` - ì„ íƒì§€ ê³ ìœ  ID
- `choice.text` - ì„ íƒì§€ í…ìŠ¤íŠ¸
- `effect.type` - íš¨ê³¼ íƒ€ì… (ê³ ê¸‰ í˜•ì‹)
- `condition.type` - ì¡°ê±´ íƒ€ì… (ê³ ê¸‰ í˜•ì‹)

### ì„ íƒ í•„ë“œ
- `say.speaker` - í™”ì ì´ë¦„
- `choice.next` - ë‹¤ìŒ ì”¬ (ì—†ìœ¼ë©´ ë‹¤ìŒ ë…¸ë“œ)
- `choice.next_scene` - ë‹¤ìŒ ì”¬ (ê°„ë‹¨í•œ í˜•ì‹)
- `choice.conditions` - ì¡°ê±´
- `choice.effects` - íš¨ê³¼
- `choice.enabled` - í™œì„±í™” ì—¬ë¶€ (ê¸°ë³¸ê°’: true)
- `choice.disabledReason` / `choice.disabled_reason` - ë¹„í™œì„±í™” ì´ìœ 
- `choice.isBranchPoint` / `choice.branch` - ë¶„ê¸°ì  í‘œì‹œ (ê¸°ë³¸ê°’: false)
- `choice.metadata` - ë©”íƒ€ë°ì´í„°
- `effect.description` - ì„¤ëª…
- `condition.description` - ì„¤ëª…

---

## ğŸ”„ í˜¸í™˜ì„± ì°¸ê³ 

ë‹¤ìŒ í•„ë“œë“¤ì€ ì—¬ëŸ¬ í˜•ì‹ìœ¼ë¡œ ì§€ì›ë©ë‹ˆë‹¤ (í•˜ìœ„ í˜¸í™˜ì„±):
- `next_scene` â†” `next.scene`
- `disabled_reason` â†” `disabledReason`
- `branch` â†” `isBranchPoint`

---

**ì´ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ëª¨ë“  ê¸°ëŠ¥ì„ í™œìš©í•˜ì„¸ìš”!** âœ…
















